package com.yonyou.scf.common.util.net;

import java.util.ArrayList;

/**
 * 此方法用于Message模块给前端业务平台发送消息报文
 * 
 * HTTPS/HTTP 通讯工具类，向客户端发消息
 * 
 * <pre>
 * Modify Information:
 * Author       Date        Description
 * ============ =========== ============================
 * shengsu      2017-03-16  Create this file
 * 
 * </pre>
 * 
 */
public class TxMessenger {

	/**
	 * 向客户端发消息
	 * 
	 * @param ArrayList<NameValuePair> list
	 * @param String sendUrl
	 * @param String connectionMode
	 * @return String
	 * @throws Exception
	 */
	public static String send(ArrayList<NameValuePair> list, String sendUrl, String connectionMode) throws Exception {

		String responseText="";

		// https
		if (sendUrl.toLowerCase().startsWith("https")) {

			DefaultHttpsConnection httpsConnection = new DefaultHttpsConnection(sendUrl);
			httpsConnection.setIgnoreHostname(true);
			if ("2".equals(connectionMode)) {
				httpsConnection.setUseDefaultSSLSocketFactory(true);
			} else {
				httpsConnection.setUseDefaultSSLSocketFactory(false);
			}
			responseText = httpsConnection.send(list);

		} else { // http

			HttpConnection httpConnection = new HttpConnection(sendUrl);
			responseText = httpConnection.send(list);
		}

		return responseText;
	}
	
	/**
	 * 此方法有在用
	 * 
	 * 向客户端发消息
	 * 
	 * @param ArrayList<NameValuePair> list
	 * @param String sendUrl
	 * @param String connectionMode
	 * @return String
	 * @throws Exception
	 */
	public static String send(Object obj, String sendUrl, String connectionMode) throws Exception {

		String responseText="";

		// https
		if (sendUrl.toLowerCase().startsWith("https")) {

			DefaultHttpsConnection httpsConnection = new DefaultHttpsConnection(sendUrl);
			httpsConnection.setIgnoreHostname(true);
			if ("2".equals(connectionMode)) {
				httpsConnection.setUseDefaultSSLSocketFactory(true);
			} else {
				httpsConnection.setUseDefaultSSLSocketFactory(false);
			}
			responseText = httpsConnection.send(obj);

		} else { // http

			HttpConnection httpConnection = new HttpConnection(sendUrl);
			responseText = httpConnection.send(obj);
		}

		return responseText;
	}
}
