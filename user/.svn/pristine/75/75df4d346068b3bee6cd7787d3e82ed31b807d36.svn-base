package com.yonyou.scf.user.service;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.annotation.Resource;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import com.yonyou.scf.common.input.SCF921002Input;
import com.yonyou.scf.common.output.SCF921002Output;
import com.yonyou.scf.user.mapper.hand.UserMapper;

@Transactional
@Service
public class UserService {
	
	@Resource
    public CommonService commonService;
    
	@Autowired
    private UserMapper userMappper;
        
	//客户档案信息初始化页面
    public Map<String,Map<String,Object>> SCF921001(){

    	Map<String,Map<String,Object>> result = new HashMap<String, Map<String,Object>>();
    	
    	//客户类型下拉框获取
    	result.put("COMDD0008", commonService.COMDD0008());
    	//业务角色下拉框获取
    	result.put("COMDD0009", commonService.COMDD0009());
    	//客户名称获取
    	result.put("COMDD0031", commonService.COMDD0031());
    	//证件号码获取
    	result.put("COMDD0032", commonService.COMDD0032());
    	
    	return result;
    }
        
	//客户档案查询
	//客户名称 userName
	//证件号码 credentialNum
	//客户类型 userType
	//业务角色 roleType
    public List<SCF921002Output> SCF921002(SCF921002Input input){
    	
    	List<SCF921002Output> result = new ArrayList<SCF921002Output>();
    	
    	Map<String, Object> params = new HashMap<String, Object>();
		params.put("userId", input.getUserName());
		params.put("credentialNum", input.getCredentialNum());
		params.put("userType", input.getUserType());
		params.put("userRole", input.getRoleType());

		List<Map<String, Object>> dataList = userMappper.getUserInfoList(params);
    	
		for(Map<String, Object> data:dataList) {
			SCF921002Output output = new SCF921002Output(); 
			
			output.setUserName(data.get("userName").toString());
			output.setUserId(data.get("userId").toString());
			output.setCredentialNum(data.get("credentialNum").toString());
			output.setCredentialType(data.get("credentialType").toString());
			output.setUserType(data.get("userType").toString());
			output.setUserRole(data.get("userRole").toString());
			output.setCreatTime(data.get("creatTime").toString());
			output.setEnableStatus(data.get("status").toString());
			
			result.add(output);
		}
		
		return result;
    }
    
    
}