package ftp;

import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.boot.test.SpringApplicationConfiguration;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import com.yonyou.scf.tools.middleware.log.Loggerx;

@SpringApplicationConfiguration
@Configuration
public class FTPFixPool {
	private Loggerx logger = Loggerx.getLogger(FTPFixPool.class.getName());
	
	@Value("${user.primary.ftp.ip}")
	private String ip;
	@Value("${user.primary.ftp.port}")
	private int port;
	@Value("${user.primary.ftp.account}")
	private String account;
	@Value("${user.primary.ftp.pwd}")
	private String pwd;
	@Value("${user.primary.ftp.timeout}")
	private int timeout;
	
	
	@Bean(name="fTPClientPool")
	public FTPClientPool fTPClientPool(@Qualifier("fTPConnectionFactory") FTPConnectionFactory fTPConnectionFactory){
		return new FTPClientPool(6, fTPConnectionFactory);
	}

	public FTPConnectionFactory createFactory( FTPClientConfiguration fTPClientConfiguration) {
		
		FTPConnectionFactory factory = new FTPConnectionFactory(fTPClientConfiguration);
		
		return factory;
	}
	
	public FTPClientConfiguration createConfig() {
		FTPClientConfiguration config = new FTPClientConfiguration();
			config.setIp(ip);
			config.setPort(port);
			config.setAccount(account);
			config.setPwd(pwd);
			config.setTimeout(timeout);
		return config;
	}
	
}
